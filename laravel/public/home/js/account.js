function loginCallback(){OPPO.conf.jsonpDone&&(window.location.href=OPPO.conf.loginCallback)}function logoutCallback(){OPPO.conf.jsonpDone&&(window.location.href=OPPO.conf.logoutCallback)}function redirectTo(t){1===parseInt(OPPO.conf.isDialog)?window.parent.location.href=t:window.location.href=t}function crossDomainJsonp(t,e,a){arguments[1]||(e=OPPO.conf.domains),arguments[2]||0==arguments[2]||(a=!0);var n=e.length;if(n){var o={sign:t.sign,value:t.value,key:t.key};1==a&&setTimeout(function(){redirectTo(t.callback)},3e3),OPPO.crossCount=0,$.each(e,function(t,e){$.ajax({async:!0,url:e+"/setssocookie.php",dataType:"jsonp",jsonp:"jsonpCallback",data:o,timeout:1e3,complete:function(){OPPO.crossCount++}}),OPPO.crossCount==n&&1==a&&(OPPO.conf.jsonpDone=!0)})}else 1==a&&redirectTo(t.callback)}function formCrossDomain(){var t={sign:$("#domainSign").val(),value:$("#domainValue").val(),key:$("#domainKey").val(),callback:$("#domainCallback").val()};crossDomainJsonp(t)}function isMobile(){return/(ipad|iphone|ipod|android)/.test(navigator.userAgent.toLowerCase())}function feedback(){document.querySelector(".fly-feedback")&&(document.querySelector(".fly-feedback").style.display="block");var t=!1;$("#overlay-feedback").size()||$("body").append($('<div id="overlay-feedback" />'));$("#overlay-feedback");$("#feedback-button").on("touchstart",function(e){t=!t,$(this).parent().find(".feedback-tooltip")[t?"addClass":"removeClass"]("feedback-active"),$("#overlay-feedback").css("display",t?"block":"none"),$("html")[t?"addClass":"removeClass"]("feedback-opened"),e.preventDefault()}),$("#overlay-feedback").on("touchstart",function(e){$(".fly-feedback").find(".feedback-tooltip")[t?"removeClass":"addClass"]("feedback-active"),$("#overlay-feedback").css("display",t?"none":"block"),$("html")[t?"removeClass":"addClass"]("feedback-opened"),t=!1,e.preventDefault()})}!function(){var t=$("[data-trigger]");t.each(function(){var t=$(this);t.click(function(){var e=t.data("trigger");$("#"+e).click()})})}();var OPPO={utils:{},conf:{},controller:{},lang:{must_be_integer:"请输入数字"}};OPPO.controller.AuthController=function(){var t=function(t){return 11===t.length&&!isNaN(t)&&"1"===t.substring(0,1)},e=OPPO.utils.isEmail,a=$('input[name="username"]'),n=$('input[name="password"]'),o=$('input[name="r_password"]'),s=$('input[name="attack_type"]'),r=$('input[name="captcha"]'),i=$('input[name="is-show-captcha"]'),l=$("input[name=r_password]"),c=$(".error_msg_note"),u=$("input[name=activation_code]"),d=$(".btn_get_activation_code"),p=$(".activation_section"),f=function(){if($("#loginBtn").hasClass("btn-disabled"))return!1;var t=$.trim(a.val()),e=$.trim(n.val()),o=$.trim(r.val()),l=$.trim(s.val()),u=$.trim(i.val()),d=OPPO.conf.isHTML5;if(c.html(""),!t||t===a.attr("placeholder"))return a.focus(),c.html("请输入会员名/邮箱/手机号码"),!1;if(!e||e===n.attr("placeholder"))return n.focus(),c.html("请输入密码"),!1;if(1==l&&1==u&&!o)return r.focus(),c.html("请输入图片验证码"),!1;$("#loginBtn").val("登录中...").addClass("btn-disabled");var p=$("#loginForm").serializeArray(),f=$("#loginForm").attr("action");return OPPO.conf.loginCallback="",$.ajax({url:f,data:p,type:"post",success:function(t){if("1"==t.status){"undefined"!=typeof _optj&&(1===parseInt(OPPO.conf.isDialog)?_optj.push(["_trackEvent","account","btn","login","login-dialog"]):_optj.push(["_trackEvent","account","btn","login","login"])),callbackData=t.data;var e=OPPO.conf.domains.length;if(e>0){var a={sign:callbackData.sign,value:callbackData.value,key:callbackData.key,callback:callbackData.callback};d?(crossDomainJsonp(a,!1,!1),setTimeout(function(){if(window.parent!==window&&window.parent){var t=window.parent;t.postMessage("login:success",OPPO.conf.STORE_URL)}},200)):crossDomainJsonp(a)}else redirectTo(callbackData.callback)}else{if("-6"!=t.status)return(t.data.isAttack||-200==t.status)&&($("#register-vcode").removeClass("g-hide").addClass("g-show field"),2==t.data.attackType?$("#div_id_embed").html()?geetest.refresh():geetest.start():OPPO.utils.updateCaptcha()),$("#loginBtn").val("登录").removeClass("btn-disabled"),c.html(t.message),!1;redirectTo(t.message)}},error:function(){return $("#loginBtn").val("登录").removeClass("btn-disabled"),c.html("系统异常"),!1}}),!1},m=function(){$(".registerEmailResend").click(function(){var t=$(this),e=$(this).parent().find(".emailResendMessage"),a=$.trim(t.attr("data-account"));e.html("（正在发送...）"),$.ajax({url:OPPO.conf.BASE_URL+"/auth/resend_email",type:"post",data:{uid:a},success:function(t){"1"==t.status?e.html("（发送成功！）"):e.html("<font color='red'>（"+t.message+"）</font>")},error:function(){e.html("<font color='red'>（系统异常）</font>")}})})},h=function(){var t=$(window).width();750>t&&scrollToTop(200)},v=function(){var s=$.trim($(a).val());s&&p.toggle(t(s)),a.blur(function(){var n=$.trim($(this).val());if(!n)return c.html(),!1;if(!t(n)&&!e(n))return c.html("请输入正确的邮箱/手机号码"),a.focus(),h(),!1;var o=OPPO.conf.BASE_URL+"/auth/checkaccount";$.post(o,{account:n}).success(function(t){"1"==t.status?c.text(""):("-200"==t.status&&OPPO.utils.updateCaptcha(),c.text(t.message))}).error(function(){c.text("系统异常"),h()}),p.toggle(t(n))}),n.on("keyup",function(t){t.preventDefault(),OPPO.utils.check_pass_strong(n)}),n.blur(function(){OPPO.utils.check_pass_strong(n)});var i=60,l=function(){0>=i?(d.html("获取验证码").removeClass("btn-disabled"),i=60):(d.html(i+"秒后重新获取"),i--,setTimeout(function(){l()},1e3))};d.click(function(){if(d.hasClass("btn-disabled"))return!1;d.addClass("btn-disabled");var t=$.trim(a.val()),e=$.trim(n.val()),s=$.trim(o.val()),u=$.trim(r.val());if(!t)return c.html("请输入手机号码或邮箱地址"),d.removeClass("btn-disabled"),h(),void 0;if(!e)return c.html("请输入密码"),d.removeClass("btn-disabled"),h(),void 0;if(!s)return c.html("请输入确认密码"),d.removeClass("btn-disabled"),h(),void 0;if(e!==s)return c.html("两次输入的密码不一致"),d.removeClass("btn-disabled"),h(),void 0;if(!u)return c.html("请输入图片验证码"),d.removeClass("btn-disabled"),h(),void 0;var p=OPPO.conf.BASE_URL+"/auth/sendActivationCode";$.post(p,{phone:t,password:e,rpassword:s,captcha:u}).success(function(t){"1"==t.status?l():("-200"==t.status&&OPPO.utils.updateCaptcha(),c.text(t.message),h(),i=0,l())}).error(function(){c.text("系统异常"),d.removeClass("btn-disabled"),h(),i=0,l()})}),$(".register-form input").focus(function(){"undefined"!=typeof _optj&&_optj.push(["_trackEvent","account","input","register",$(this).attr("name")+"-focus"])}).blur(function(){"undefined"!=typeof _optj&&_optj.push(["_trackEvent","account","input","register",$(this).attr("name")+"-blur"])})},g=function(){var s=$.trim(a.val()),i=$.trim(n.val()),d=$.trim(l.val()),p=$.trim(r.val());if(c.html(""),!s)return c.html("请输入邮箱/手机号码"),h(),a.focus(),!1;if(!t(s)&&!e(s))return c.html("请输入正确的邮箱/手机号码"),h(),a.focus(),!1;if(!i)return c.html("请输入密码"),h(),n.focus(),!1;if(!d)return c.html("请输入确认密码"),h(),o.focus(),!1;if(i!==d)return c.html("两次输入的密码不一致"),h(),!1;if(t(s)){var f=$.trim(u.val());if(!f)return c.html("请输入手机验证码"),h(),!1}if(!p)return c.html("请输入图片验证码"),h(),!1;var m=$("input[name=allowed]:checked").length;return m?!0:(c.html("请同意协议内容"),h(),!1)},b=function(){$("#loginBtn").click(f),n.keydown(function(t){13==t.keyCode&&f()}),r.keydown(function(t){13==t.keyCode&&f()})};return{login:function(){return b(),{updateCaptcha:OPPO.utils.updateCaptcha,doSubmit:f}},register:function(){return v(),{updateCaptcha:OPPO.utils.updateCaptcha,registerValidate:g,doSubmit:g}},validateEmail:function(){return m(),{}},logout:function(){var t=$("#thirdDomainKey");if(t.length>0){var e=$.trim($("#thirdDomainKey").val()),a=$.trim($("#thirdDomainValue").val()),n=$.trim($("#thirdDomainSign").val()),o={key:e,value:a,sign:n};crossDomainJsonp(o,OPPO.conf.wxdomains,!1)}return formCrossDomain(),{}}}},$(function(){$.each($(".lt-ie9 input[type=text],.lt-ie9 textarea"),function(t,e){var a=$(e).attr("placeholder"),n=$(e).val();return"undefined"==typeof a||""==a||""!=n?!1:($(e).val(a),$(e).on("focus",function(){var t=$(this).val();t==a&&$(this).val("")}),$(e).on("blur",function(){var t=$(this).val();""==t&&$(this).val(a)}),void 0)}),$.each($(".lt-ie9 input[type=password]"),function(t,e){var a=$(e).attr("placeholder"),n=$(e).val();if("undefined"==typeof a||""==a||""!=n)return!1;var o='<span class="placeholder">'+a+"</span>";$(e).parent().append(o),$(e).on("focus",function(){$(this).val();$(this).parent().find("span.placeholder").hide()}),$(e).on("blur",function(){var t=$(this).val();t=$.trim(t),""==t&&$(this).parent().find("span.placeholder").show()}),$(e).parent().find("span.placeholder").on("click",function(){$(this).hide(),$(this).parent().find("input[type=password]").focus()})})}),$(function(){$("#footer-wx").hover(function(){$(this).find(".wx-float").show()},function(){$(this).find(".wx-float").hide()}),$("body").on("click","#footer-wx",function(){return!1}),$("#btn-kf,#icon-kf").click(function(){var t=["http://oim.oppo.com/oim/chatClient/chatbox.jsp?companyID=8092&configID=890&enterurl=http%3A%2F%2Foim%2Emyoppo%2Ecom%2Foim%2Fpreview%2Ejsp&pagereferrer=http%3A%2F%2Foim%2Emyoppo%2Ecom%2Foim%2FembedScript%2Ejsp%3Ft%3D1517&k=1"];return window.open(t,"","width=1010, height=660, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no"),!1}),$("body").on("mouseenter","#btn-qr",function(){$("#qr-code").show()}),$("body").on("mouseleave","#btn-qr",function(){$("#qr-code").hide()}),$("body").on("click",".footer-sitemap .js-toggle-sitemap",function(){return $(this).hasClass("active")?$(this).removeClass("active").parent().find("ul").hide():($(".footer-sitemap .js-toggle-sitemap").each(function(){$(this).hasClass("active")&&$(this).removeClass("active").parent().find("ul").hide()}),$(this).addClass("active").parent().find("ul").show()),!1}),isMobile()&&feedback()}),OPPO.controller.PasswordsController=function(){var t=$("#get_validation_code_btn"),e=60,a=function(){0>=e?(t.html("重新发送").removeClass("btn-disabled"),e=60):(t.html(e+"秒后重新发送"),e--,setTimeout(function(){a()},1e3))},n=function(){var n=$(".error_msg_note"),o=$("#emailResendMessage"),s=$("#sendNextBtn"),r=($("#passwordSendNextForm"),$.trim(t.attr("data-type")));"mobile"==r&&a(),t.click(function(s){if("mobile"==r){if(t.hasClass("btn-disabled"))return!1;t.addClass("btn-disabled")}else o.html("（正在发送...）");s.preventDefault();var i=OPPO.conf.BASE_URL+"/user/msgsend";$.get(i).success(function(t){"1"==t.status?"mobile"==r?a():o.html("（发送成功！）"):(n.html(t.message),"mobile"==r&&(e=0,a()))}).error(function(){n.html("系统异常"),"mobile"==r&&(e=0,a())})}),s.click(function(){var t=$("#passwordSendNextForm").attr("action"),e=$("#passwordSendNextForm").serializeArray();return $.ajax({url:t,data:e,type:"post",success:function(t){"1"==t.status?window.location.href=t.data:n.html(t.message)},error:function(){n.html("系统异常")}}),!1})},o=$("input[name=password]");o.on("keyup",function(t){t.preventDefault(),OPPO.utils.check_pass_strong(o)}),o.blur(function(){OPPO.utils.check_pass_strong(o)});var s=function(){var t=$(".error_msg_note"),e=$("#findmeForm").find("input[name=username]"),a=$("#findmeForm").find("input[name=captcha]"),n=$.trim($(e).val()),o=$.trim($(a).val());if(""==n)return t.html("请输入邮箱/手机号"),!1;var s=OPPO.utils.isEmail(n),r=OPPO.utils.isMobile(n);return s||r?""==o?(t.html("请输入验证码"),!1):!0:(t.html("请输入正确的邮箱/手机号"),!1)},r=function(){$("#findmeForm").on("submit",function(t){t.preventDefault();var e=s();if(!e)return!1;$btn=$(this);var a=$(".error_msg_note");if($btn.hasClass("disabled"))return!1;$btn.addClass("disabled");var n=$("#findmeForm"),o=$(n).attr("action"),r=$(n).serializeArray();return $.ajax({url:o,data:r,type:"post",dataType:"json",async:!1,timeout:3e3,success:function(t){$btn.removeClass("disabled"),"1"==t.status?window.location.href=t.data:(OPPO.utils.updateCaptcha(),a.html(t.message))},error:function(){$btn.removeClass("disabled"),a.html("系统异常")}}),!1})};return{sendSuccessed:function(){n()},findme:function(){return r(),{updateCaptcha:OPPO.utils.updateCaptcha}}}},OPPO.controller.ThirdPartyController=function(){var t=function(){var t=$.trim($("#thirdLoginError").val()),e=$.trim($("#thirdCaptchaNeed").val());1==t?1==e?a():setTimeout(function(){window.location.href=OPPO.conf.WWW_URL},3e3):formCrossDomain()},e=function(){var t=$("#changeCaptcha").data("src");$("#changeCaptcha").attr("src","").attr("src",t+"?"+(new Date).getTime())},a=function(){$("#captchaForm .button-captcha").on("click",function(){var t=$("#captchaForm").serializeArray(),a=$("#captchaForm").attr("action");return $.ajax({url:a,data:t,dataType:"json",type:"post",success:function(t){if(1==t.status){var a={sign:t.data.sign,value:t.data.value,key:t.data.key,callback:t.data.callback};crossDomainJsonp(a)}else $("#captchaForm .alert-danger").html(t.message),e()},error:function(){$("#captchaForm .alert-danger").html("验证超时")}}),!1})};return{sinaCallback:function(){return t(),{changeCaptcha:e}},qqCallback:function(){return t(),{changeCaptcha:e}},alipayCallback:function(){return t(),{changeCaptcha:e}}}},OPPO.controller.UserController=function(){$(".message-box-actions .message-action-read");return Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},{index:function(){$(".whats-new").on("click","a.message-action-read",function(t){var e=$(this).attr("data-id"),a=OPPO.conf.BASE_URL+"/user/setmessageread",n={message_id:e};$.post(a,n,function(t){for(var e="",a=t.message,n=a.length,o=0;n>o;o++){var s=new Date(a[o].send_start.replace(/-/g,"/")).format("yyyy年MM月dd日 hh时mm分");if(e+="<div class='message-box'> <div class='message-box-picture'> <img alt='' src='../assets/images/content/my-oppo/service.png'></div> <div class='message-box-content'><h2 class='message-box-title'> "+a[o].title+"</h2> <div class='message-box-date'> <p>来自 "+s+"</p></div> <div class='message-box-details'>  <p> "+a[o].content+"</p><p></p></div> </div> <div class='message-box-actions'><a href='#' class='message-action-read' data-id= "+a[o].id+"><span class='icon icon-close-circle'></span> </a> </div></div> ",1==o)break}n>0?$(".unread_message").html("新消息 (未读 <strong>"+n+"</strong> 条)"):$(".unread_messages").html(""),$(".n-messages").html("("+n+")"),$(".whats-new").html(e)}),t.preventDefault()})}}},OPPO.controller.UserProfileController=function(){return{index:function(){var t=$("#update-mobile-step1 .field.input-button-item"),e=$("#update-email-step1 .field.input-button-item"),a=$("#invalid-email-alert"),n=function(t){$("[js-state]").children().each(function(){var e=$(this);e[e[0].id==="update-email-"+t?"removeClass":"addClass"]("hidden")})},o=function(){var t=function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),a=e.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},o=t("result");if(o){var s=JSON.parse(Base64.decode(o));200===s.code?n("success"):(n("step1"),a.text("抱歉您的邮箱验证失败，请您重新绑定。"),e.addClass("error"))}var r=$("#update_password");r.on("click",function(t){t.preventDefault();var e=$(this).parent();e.toggle(),e.next().toggle()});var i=$(".msg_password"),l=function(t){i.html(t).show()},c=null,u=function(t){return 0===parseInt(t)?(clearTimeout(c),window.location.reload(),!1):(l("修改成功，请使用新密码登录 <br/>（倒数 <span>"+t+"</span> 秒）"),t--,setTimeout(function(){u(t)},1e3),void 0)};$("body").on("click","#save_password",function(t){t.preventDefault();var e=OPPO.conf.BASE_URL+"/user/changepassword",a=$.trim($("input[name=old_password]").val()),n=$.trim($("input[name=password]").val()),o=$.trim($("input[name=r_password]").val());if(""===a)return l("请输入当前密码"),!1;if(""===n)return l("请输入新密码"),!1;if(""===o)return l("请输入新密码确认"),!1;if(a==n)return l("新旧密码一致，请重新输入"),!1;var s={old_password:a,password:n,r_password:o};$.ajax({type:"post",url:e,data:s,success:function(t){return ajaxIsLogin(t)?("1"==t.status?u(5):l(t.message),void 0):!1},error:function(t){l(t.responseText)}})})};o(),$("#birthSelectors").birthday({year:""==$("select[name=year]").data("default")?0:$("select[name=year]").data("default"),month:""==$("select[name=month]").data("default")?0:$("select[name=month]").data("default"),day:""==$("select[name=day]").data("default")?0:$("select[name=day]").data("default")});var s=function(){$("[class^=my-oppo-content-]").toggle()};return $("body").on("click",".form-actions .button-edit-form",function(){s()}),{sendValidationEmail:function(){var t=$('input[name="email"]').val();if(OPPO.utils.isEmail(t)){e.removeClass("error");var o=OPPO.conf.BASE_URL+"/user/update/sendmail";$.post(o,{email:t}).done(function(o){return ajaxIsLogin(o)?("1"==o.status?($("#new-email").text(t),n("step2"),e.removeClass("error")):(a.text(o.message),e.addClass("error")),void 0):!1}).fail(function(t){a.text(t.responseText),e.addClass("error")})}else a.text("请输入正确的邮箱地址"),e.addClass("error");return!1},changeUpdateEmailStep:n,sendValidationSMS:function(){var t=$(".code-btn"),e=$("#sms-resend-count-down"),a=60,n=function(){setTimeout(function(){a-->1?($("#time-left").text(a),n()):(t.toggleClass("hidden"),e.toggleClass("hidden"))},1e3)};return t.prop("disabled",!0),$.post(OPPO.conf.BASE_URL+"/user/update/sendmsg",{phone:$("#new-mobile").text()}).always(function(){t.prop("disabled",!1)}).done(function(o){return ajaxIsLogin(o)?("1"==o.status?($("#time-left").text(a),t.toggleClass("hidden"),e.toggleClass("hidden"),n(),$(".error_msg_note").html("")):$(".error_msg_note").html(o.message),void 0):!1}).fail(function(t){$(".error_msg_note").html(t.responseText)}),!1},headToUpdateMobileStep1:function(){return $("#update-mobile-step3").toggleClass("hidden"),$("#update-mobile-step1").toggleClass("hidden"),!1},headToUpdateMobileStep2:function(){var e=$.trim($('input[name="mobile"]').val());if(OPPO.utils.isMobile(e)){$("#new-mobile").text(e);var a=OPPO.conf.BASE_URL+"/user/update/checkphone",n={phone:e};$.post(a,n).success(function(e){return ajaxIsLogin(e)?("1"==e.status?(t.removeClass("error"),$("#update-mobile-step1").toggleClass("hidden"),$("#update-mobile-step2").toggleClass("hidden")):(t.addClass("error"),t.find(".message").find("span").text(e.message)),void 0):!1}).error(function(e){t.addClass("error"),t.find(".message").find("span").text(e.responseText)})}else t.addClass("error");return!1},confirmMobileUpdate:function(){var t=$("#new-mobile").text(),e=$("input[name=code]").val();if(""==e)return $(".error_msg_note").html("请输入验证码"),!1;var a=OPPO.conf.BASE_URL+"/user/update/phone",n={phone:t,code:e};return $.post(a,n).success(function(t){return ajaxIsLogin(t)?("1"==t.status?location.href=location.href:$(".error_msg_note").html(t.message),void 0):!1}).error(function(t){$(".error_msg_note").html(t.responseText)}),!1}}}}},OPPO.utils.isEmail=function(t){return t.match(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)},OPPO.utils.isMobile=function(t){return 11===t.length&&!isNaN(t)&&"1"===t.substring(0,1)},OPPO.utils.checkAddr=function(t){return t.match(/[\【\】\&\*\<\>]/)},OPPO.utils.updateCaptcha=function(){$("#captcha").attr("src",OPPO.conf.BASE_URL+"/captcha?"+Math.random())},OPPO.utils.strlen=function(t){var e=t.replace(/[^\x00-\xff]/g,"*");return e.length},OPPO.utils.check_pass_strong=function(t){if(t){var e=$.trim(t.val());if(e){$(".register-pass-strong").css("display","block");var a=testpass(e);34>a?($(".register-pass-strong span").css({opacity:"0.5",filter:"alpha(opacity=50)","-moz-opacity":"0.5"}),$(".register-pass-strong span:eq(0)").css({opacity:"1",filter:"alpha(opacity=100)","-moz-opacity":"1"})):68>a?($(".register-pass-strong span").css({opacity:"1",filter:"alpha(opacity=100)","-moz-opacity":"1"}),$(".register-pass-strong span:eq(2)").css({opacity:"0.5",filter:"alpha(opacity=50)","-moz-opacity":"0.5"})):$(".register-pass-strong span").css({opacity:"1",filter:"alpha(opacity=100)","-moz-opacity":"1"})}else $(".register-pass-strong").css("display","none")}};var repeat=function(t,e){for(var a="",n=0;n<e.length;n++){for(var o=!0,s=0,r=e.length-n-t;t>s&&r>s;s++)o=o&&e.charAt(s+n)==e.charAt(s+n+t);t>s&&(o=!1),o?(n+=t-1,o=!1):a+=e.charAt(n)}return a},testpass=function(t){var e=0;return e+=4*t.length,e+=1*(repeat(1,t).length-t.length),e+=1*(repeat(2,t).length-t.length),e+=1*(repeat(3,t).length-t.length),e+=1*(repeat(4,t).length-t.length),t.match(/(.*[0-9].*[0-9].*[0-9])/)&&(e+=5),t.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)&&(e+=5),t.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(e+=10),t.match(/([a-zA-Z])/)&&t.match(/([0-9])/)&&(e+=15),t.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&t.match(/([0-9])/)&&(e+=15),t.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&t.match(/([a-zA-Z])/)&&(e+=15),(t.match(/^\w+$/)||t.match(/^\d+$/))&&(e-=10),0>e&&(e=0),e>100&&(e=100),e};