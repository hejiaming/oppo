window.matchMedia||(window.matchMedia=function(e){var t=e.document,i=t.documentElement,n=[],s=0,l="",a={},c=/\s*(only|not)?\s*(screen|print|[a-z\-]+)\s*(and)?\s*/i,r=/^\s*\(\s*(-[a-z]+-)?(min-|max-)?([a-z\-]+)\s*(:?\s*([0-9]+(\.[0-9]+)?|portrait|landscape)(px|em|dppx|dpcm|rem|%|in|cm|mm|ex|pt|pc|\/([0-9]+(\.[0-9]+)?))?)?\s*\)\s*$/,o=0,d=function(e){var t=-1!==e.indexOf(",")&&e.split(",")||[e],i=t.length-1,n=i,s=null,o=null,d="",h=0,m=!1,f="",u="",s=null,o=0,u=null,v="",p="",x="",C="",g="",v=!1;if(""===e)return!0;do if(s=t[n-i],m=!1,(o=s.match(c))&&(d=o[0],h=o.index),!o||-1===s.substring(0,h).indexOf("(")&&(h||!o[3]&&d!==o.input))v=!1;else{if(u=s,m="not"===o[1],h||(f=o[2],u=s.substring(d.length)),v=f===l||"all"===f||""===f,s=-1!==u.indexOf(" and ")&&u.split(" and ")||[u],o=s.length-1,v&&o>=0&&""!==u)do{if(u=s[o].match(r),!u||!a[u[3]]){v=!1;break}if(v=u[2],C=p=u[5],x=u[7],g=a[u[3]],x&&(C="px"===x?Number(p):"em"===x||"rem"===x?16*p:u[8]?(p/u[8]).toFixed(2):"dppx"===x?96*p:"dpcm"===x?.3937*p:Number(p)),v="min-"===v&&C?g>=C:"max-"===v&&C?C>=g:C?g===C:!!g,!v)break}while(o--);if(v)break}while(i--);return m?!v:v},h=function(){var t=e.innerWidth||i.clientWidth,n=e.innerHeight||i.clientHeight,s=e.screen.width,l=e.screen.height,c=e.screen.colorDepth,r=e.devicePixelRatio;a.width=t,a.height=n,a["aspect-ratio"]=(t/n).toFixed(2),a["device-width"]=s,a["device-height"]=l,a["device-aspect-ratio"]=(s/l).toFixed(2),a.color=c,a["color-index"]=Math.pow(2,c),a.orientation=n>=t?"portrait":"landscape",a.resolution=r&&96*r||e.screen.deviceXDPI||96,a["device-pixel-ratio"]=r||1},m=function(){clearTimeout(o),o=setTimeout(function(){var t=null,i=s-1,l=i,a=!1;if(i>=0){h();do if((t=n[l-i])&&((a=d(t.mql.media))&&!t.mql.matches||!a&&t.mql.matches)&&(t.mql.matches=a,t.listeners))for(var a=0,c=t.listeners.length;c>a;a++)t.listeners[a]&&t.listeners[a].call(e,t.mql);while(i--)}},10)},f=t.getElementsByTagName("head")[0],t=t.createElement("style"),u=null,v="screen print speech projection handheld tv braille embossed tty".split(" "),p=0,x=v.length,C="#mediamatchjs { position: relative; z-index: 0; }",g="",b=e.addEventListener||(g="on")&&e.attachEvent;for(t.type="text/css",t.id="mediamatchjs",f.appendChild(t),u=e.getComputedStyle&&e.getComputedStyle(t)||t.currentStyle;x>p;p++)C+="@media "+v[p]+" { #mediamatchjs { position: relative; z-index: "+p+" } }";return t.styleSheet?t.styleSheet.cssText=C:t.textContent=C,l=v[1*u.zIndex||0],f.removeChild(t),h(),b(g+"resize",m),b(g+"orientationchange",m),function(e){var t=s,i={matches:!1,media:e,addListener:function(e){n[t].listeners||(n[t].listeners=[]),e&&n[t].listeners.push(e)},removeListener:function(e){var i=n[t],s=0,l=0;if(i)for(l=i.listeners.length;l>s;s++)i.listeners[s]===e&&i.listeners.splice(s,1)}};return""===e?(i.matches=!0,i):(i.matches=d(e),s=n.push({mql:i,listeners:null}),i)}}(window)),function(e,t){function i(e,t){if(e&&-1!=e.indexOf("?")){var i=e.substring(e.indexOf("?")+1),n={};if(i)for(var s=0,l=i.split("&"),a=l.length;a>s;s++){var c=l[s].split("=");n[c[0]]=decodeURIComponent(c[1])}return t&&n[t]?n[t]:n}}var n={elems:{menu:e("#selector-filter"),overlay:e("#selector-overlay"),doc:e("html")},setup:function(t){var i=this;i.$button=e(t),i.$list=i.elems.menu.find(".selector-list"),i.dispose()},menuOpen:function(){},menuClose:function(){var e=this;e.elems.doc.removeClass("selector-menu-open"),e.elems.overlay.removeClass("animated"),e.elems.menu.removeClass("animated"),setTimeout(function(){e.elems.overlay.hide(),e.elems.menu.hide()},200)},dispose:function(){var t=this;t.elems.overlay.on("touchstart",function(e){e.preventDefault()}),t.$button.on("click",function(e){t.elems.doc.addClass("selector-menu-open"),t.elems.overlay.show(),t.elems.menu.show(),setTimeout(function(){t.elems.overlay.addClass("animated"),t.elems.menu.addClass("animated")},200),e.preventDefault()}),t.elems.overlay.on("click",function(e){t.menuClose(),e.preventDefault()}),t.$list.find(".list-item").each(function(){var i=e(this),n=i.find(".list-label"),s=i.find(".list-select");s.length>0&&(n.expanded=!1,n.on("click",function(e){t.$list.find(".list-select").hide(),i.hasClass("item-checked")?(i.removeClass("item-checked"),s.hide()):(t.$list.find(".list-item").removeClass("item-checked"),i.addClass("item-checked"),s.show()),e.preventDefault()}))})}},s={elems:{cancel:e("#filter-cancel"),confirm:e("#filter-confirm"),clean:e("#filter-clean")},setup:function(n){this.hasher=i(t.location.search),this.$view=e(n),this.$list=this.$view.find(".list-item"),this.$list.length<1||(this.setHasher(),this.dispose())},dispose:function(){var t=this;t.elems.cancel.on("click",function(e){n.menuClose(),e.preventDefault()}),t.elems.clean.on("click",function(i){t.$list.find("li").removeClass("checked"),t.$list.each(function(){e(this).find("li").eq(0).addClass("checked")}),i.preventDefault()}),t.elems.confirm.on("click",function(e){t.updateHasher(),e.preventDefault()}),t.selecter()},setHasher:function(){var t,i=this;i.$list.each(function(){var t=e(this);if(t.find("li").eq(0).addClass("checked"),t.find("li").length>0){var i=t.find("li").eq(0).find("a").text(),n=e("<em />").text(i);t.find(".list-label").find("em").remove(),t.find(".list-label").append(n)}});for(t in i.hasher){var n=i.$view.find('[data-selector-bind="'+t+'"]');n.length>0&&n.find("li").each(function(){var s=e(this),l=s.find("a").attr("data-selector-value");if(l&&i.hasher[t]==l){n.find("li").removeClass("checked"),s.addClass("checked");var a=e("<em />").text(s.find("a").text());n.find(".list-label").find("em").remove(),n.find(".list-label").append(a)}})}},selecter:function(){var t=this;t.$list.each(function(){{var i=e(this);i.attr("data-selector-bind")}t.selectEvent(i)})},selectEvent:function(t){t.find("li").each(function(){var i=e(this);i.on("click",function(i){t.find("li").removeClass("checked"),e(this).addClass("checked");var n=e("<em />").text(e(this).find("a").text());t.find(".list-label").find("em").remove(),t.find(".list-label").append(n),i.preventDefault()})})},updateHasher:function(){var i,n=this,s=n.hasher,l={},a={},c="";n.$list.each(function(){var t=e(this),i=t.attr("data-selector-bind");t.find("li").each(function(){var t=e(this),n=null;t.hasClass("checked")&&(n=t.find("a").attr("data-selector-value"),a[i]=n?n:"none")})}),l=e.extend({},s,a);for(i in l)"none"!=l[i]&&(c+="&"+i+"="+l[i]);c.length>0&&(t.location.search=c.substring(1))}};e(function(){n.setup("#select-products"),s.setup("#selector-filter")})}(jQuery,this||window);